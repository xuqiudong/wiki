---
title: 02-JVM常见问题
description: JVM相关的一些问题
published: true
date: 2023-08-17T07:22:28.250Z
tags: 咕泡, 面试, jvm
editor: markdown
dateCreated: 2023-08-17T07:22:28.250Z
---

# 02-JVM相关问题

## 01 CPU 飙高系统反应慢怎么排查
1. CPU最小执行单元是线程。
2. 导致 CPU 飙高的原因有几个方面：
- 2.1 上下文切换过多  (文件 IO、网络 IO、锁等待、线程阻塞等操作)
- 2.2 CPU 资源过度消耗:创建了大量的线程，或线程一直占用CPU 资源无法被释放，比如死循环！
3. 解决方案：通过 `top` 命令，找到 CPU 利用率较高的进程，在通过 `Shift+H` 找到进程中 CPU 消耗过高的线程
 - 如过是同一个线程，说明程序中存在线程长期占用 CPU 没有释放的情况，这种情况直接通过 jstack 获得线程的 Dump 日志，定位到线程日志后就可以找到问题的代码。
 - 如果线程 id 不断变化，说明线程创建过多，需要挑选几个线程id，通过 jstack 去线程 dump 日志中排查。
5. 有可能定位的结果是程序正常，只是在 CPU 飙高的那一刻，用户访问量较大，导致系统资源不够。 